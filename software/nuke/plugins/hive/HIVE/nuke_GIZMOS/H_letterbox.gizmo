#! C:/Program Files/Nuke9.0v7/nuke-9.0.7.dll -nx
version 9.0 v7
Gizmo {
 knobChanged "\ntn = nuke.thisNode()\nkn = nuke.thisKnob().name()\n\nif kn == 'letterbox':\n  if tn\['letterbox'].value() == 'none':\n    #tn\['letterbox_ratio'].setVisible(False)    \n    tn\['letterbox_ratio'].setFlag(nuke.INVISIBLE)\n    tn\['letterbox_opacity'].setFlag(nuke.DISABLED)\n  elif tn\['letterbox'].value() == 'custom':\n    #tn\['letterbox_ratio'].setVisible(True)\n    tn\['letterbox_ratio'].clearFlag(nuke.INVISIBLE)\n    tn\['letterbox_opacity'].clearFlag(nuke.DISABLED)\n    pass\n  else:\n    #tn\['letterbox_ratio'].setVisible(False)\n    tn\['letterbox_ratio'].setFlag(nuke.INVISIBLE)\n    tn\['letterbox_opacity'].clearFlag(nuke.DISABLED)\n    lb_xy = tn\['letterbox'].value().split(':')\n    tn\['letterbox_ratio'].setValue(float(lb_xy\[0]),0)\n    tn\['letterbox_ratio'].setValue(float(lb_xy\[1]),1)\n"
 tile_color 0x66ccff00
 addUserKnob {20 HIVE_LETTERBOX}
 addUserKnob {26 text l @hivemind.png T "<b><font size='4' color='#66ccff'>LETTERBOX</font></b><font size='2'> _ v0.1.0<br>black bars for everyone</font>"}
 addUserKnob {26 seperator l "" +STARTLINE}
 addUserKnob {4 letterbox M {none 1:1 4:3 16:9 14:9 1.66:1 1.85:1 2.35:1 custom}}
 addUserKnob {12 letterbox_ratio l " ratio " -STARTLINE +INVISIBLE}
 letterbox_ratio {2.35 1}
 addUserKnob {7 letterbox_opacity l "letterbox opacity" +DISABLED}
 letterbox_opacity 1
 addUserKnob {6 reformat2letterbox l reformat +STARTLINE}
}
 Input {
  inputs 0
  name Input1
  xpos -64
  ypos -153
 }
 Dot {
  name Dot1
  xpos -30
  ypos -48
 }
set N8beb9800 [stack 0]
 Crop {
  preset square
  box {{"(input.width/input.height) > (parent.letterbox_ratio.x/parent.letterbox_ratio.y) ? floor((input.width - (input.height * (parent.letterbox_ratio.x/parent.letterbox_ratio.y))) / 2) : 0" x4553 435} {"(input.width/input.height) > (parent.letterbox_ratio.x/parent.letterbox_ratio.y) ? 0 : ((input.width/input.height) == (parent.letterbox_ratio.x/parent.letterbox_ratio.y) ? 0 : rint(((input.height - (input.width / parent.letterbox_ratio.x)) /2)))" x4553 425} {"(input.width/input.height) > (parent.letterbox_ratio.x/parent.letterbox_ratio.y) ? ceil((input.height * (parent.letterbox_ratio.x/parent.letterbox_ratio.y)) + ((input.width - (input.height * (parent.letterbox_ratio.x/parent.letterbox_ratio.y))) / 2)) : input.width" x4553 1515} {"(input.width/input.height) > (parent.letterbox_ratio.x/parent.letterbox_ratio.y) ? input.height : ((input.width/input.height) == (parent.letterbox_ratio.x/parent.letterbox_ratio.y) ? input.height : rint(((input.height - (input.width / parent.letterbox_ratio.x)) /2) + (input.width / parent.letterbox_ratio.x) ))" x4553 1505}}
  reformat {{reformat2letterbox}}
  name letterbox
  xpos -64
  ypos 50
  disable {{parent.letterbox==0?1:0}}
  addUserKnob {20 User}
  addUserKnob {7 test2}
  test2 {{parent.letterbox_ratio.x}}
  addUserKnob {7 test}
  test {{"rint(input.height * (parent.letterbox_x/parent.letterbox_y))"}}
 }
set N8beb9400 [stack 0]
push $N8beb9400
push $N8beb9800
 Dot {
  name Dot2
  xpos 144
  ypos -48
 }
 Merge2 {
  inputs 2
  operation copy
  mix {{parent.letterbox_opacity}}
  name letterbox_opacity
  xpos 110
  ypos 50
 }
 Switch {
  inputs 2
  which {{reformat2letterbox}}
  name Switch1
  xpos -64
  ypos 166
 }
 Output {
  name Output1
  xpos -64
  ypos 218
 }
push $N8beb9400
push 0
 Viewer {
  inputs 3
  frame_range 4553-4605
  input_number 1
  name Viewer1
  xpos 171
  ypos 196
 }
end_group
